<div class="container mx-auto p-4 md:p-6">

  <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
     <div class="w-full md:w-2/3">
      <input [(ngModel)]="searchQuery" (input)="filterCoupons()" type="text" placeholder="Search for store items"
        class="w-full px-4 py-2 border  rounded-md bg-white  focus:outline-none focus:ring-2 focus:ring-gray-300">
    </div>
    <div>
      <label for="sort" class="mr-2">Sort By:</label>
      <select [(ngModel)]="sortOrder" (change)="sortCoupons()"
        class="border rounded-md px-4 py-2 bg-gray-200">
        <option value="newest">Newest to Oldest</option>
        <option value="oldest">Oldest to Newest</option>
      </select>
    </div>
  </div>


  <button class="md:hidden mb-4 border rounded-md px-4 py-2 bg-gray-200 w-full" (click)="showFilters = !showFilters">
    {{ showFilters ? 'Hide Filters' : 'Show Filters' }}
  </button>

  <div class="flex flex-col md:flex-row">
 
    <div [ngClass]="{ 'hidden md:block': !showFilters }" class="w-full md:w-1/4 bg-white p-4 rounded-lg shadow-md mb-4 md:mb-0">
  <h2 class="font-semibold text-lg mb-3">Category</h2>
  <ul class="space-y-2">
    <li *ngFor="let category of categories">
      <input type="checkbox" (change)="filterByCategory(category)" [checked]="selectedCategory === category"> 
      <label>{{ category }}</label>
    </li>
  </ul>

  <h2 class="font-semibold text-lg mt-4">Location</h2>
  <ul class="space-y-2">
    <li *ngFor="let location of locations">
      <input type="checkbox" (change)="filterByLocation(location)" [checked]="selectedLocation === location"> 
      <label>{{ location }}</label>
    </li>
  </ul>

  <h2 class="font-semibold text-lg mt-4">Price</h2>
  <div class="flex flex-col gap-2">
    <input type="range" min="1000" max="500000" [(ngModel)]="minPrice" (change)="updatePriceRange()">
    <input type="range" min="1000" max="500000" [(ngModel)]="maxPrice" (change)="updatePriceRange()">
    <p>₦{{ minPrice }} - ₦{{ maxPrice }}</p>
  </div>

  <h2 class="font-semibold text-lg mt-4">Percentage</h2>
  <ul class="space-y-2">
    <li *ngFor="let range of discountRanges">
      <input type="checkbox" (change)="filterByDiscount(range)" [checked]="selectedDiscount === range"> 
      <label>{{ range }}</label>
    </li>
  </ul>
</div>

    <div class="w-full md:w-3/4">
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        <div *ngFor="let coupon of paginatedCoupons"
          class="bg-[#FAF7FD] p-4 rounded-lg shadow-md border flex flex-col justify-between h-[260px] w-full">
          


          <div class="flex items-center justify-between">
            <img [src]="coupon.brand?.logo || 'https://via.placeholder.com/40'" alt="Coupon Logo"
              class="w-10 h-10 object-contain">
            <div class="text-purple-500 text-lg">➤</div>
          </div>

          <h2 class="text-sm font-bold mt-2 truncate">{{ coupon.brand?.name || 'Brand Name' }}</h2>
          <p class="text-xs text-gray-600 line-clamp-2">{{ coupon.description }}</p>
          <span class="text-red-500 font-semibold text-sm">-{{ coupon.coupon_discount || 'XX' }}%</span>

   
          <button class="mt-2 border rounded-md px-4 py-1 text-sm w-full bg-gray-100 hover:bg-gray-200">
            See Offer →
          </button>
        </div>
      </div>


      <div class="flex justify-center mt-6">
        <button (click)="prevPage()" [disabled]="currentPage === 1"
          class="border rounded-md px-4 py-2 mx-2 bg-gray-200">Previous</button>
        <span class="px-4 py-2 text-sm">{{ currentPage }} / {{ totalPages }}</span>
        <button (click)="nextPage()" [disabled]="currentPage >= totalPages"
          class="border rounded-md px-4 py-2 mx-2 bg-gray-200">Next</button>
      </div>
    </div>
  </div>
</div>